<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./CSS/styles.css">
</head>
<body>

    <div class="add-tv">
        <form action="/tv" class="form-activate-tv" method="post" autocomplete="off">

            <h2 class="activate-tv__titulo">ACTIVAR EQUIPO</h2>

            <div class="activate-tv__is-user">
                <div class="is-user__selector is-user__selector--si" onclick="invertButton('isUser')" id="selector-si">REGISTRADO</div>
                <div class="is-user__selector is-user__selector--no" onclick="invertButton('isNotUser')" id="selector-no">NO REGISTRADO</div>
            </div>

            
            <input class="activate-tv__user" required type="text" name="user" placeholder="Usuario" id="input-user" >

            
            <input class="activate-tv__pass" required type="password" name="pass" placeholder="Clave" id="input-pass" >

            <div class="activate-tv__number">
                <h3 class="activate-tv__subtitulo" >MAQUINA NÂº</h3>
                <select required="true" name="tv__number" class="activate-tv__select" id="">
                    <option  value=""></option>
                    <option  value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                </select>

            </div>

            <div class="activate-tv__tiempo">

                <h3 class="activate-tv__subtitulo">TIEMPO</h3>
                
                <select name="hours_form" id="horas">
                        <option value="00">00</option>
                        <option value="01">01</option>
                        <option value="02">02</option>
                        <option value="03">03</option>
                        <option value="04">04</option>
                        <option value="05">05</option>
                        <option value="06">06</option>
                        <option value="07">07</option>
                        <option value="08">08</option>
                        <option value="Tiempo libre">Libre</option>
                </select>
                
                <select class="tiempo__minutos" name="minutes_form" id="minutos" class="">
                        <option value="00">00</option>
                        <option value="30">30</option>
                </select>
                
            </div>

            <input class="activate-tv__boton" type="submit" id="button-activate" value="ACTIVAR" >
        
        </form>
        <div class="mostrar-datos" id="mostrar-datos">

        </div>
    </div>

    <script src="script.js"></script>

    <script>
        leerEquipos()
        
        const leerEquipos = ()=>{
                    fetch('/tv/', {method:'GET'})
                    .then((res)=>res.json())
                    .then(data =>{

                        const mostrarDatos = document.querySelector('#mostrar-datos')
                        let html = '';
                        data.forEach(equipoActivo => {
                            html += `<div>${data.id}HOOOOO</div>`
                        });

                        mostrarDatos.innerHTML = html

                    })
                
                };


        // obtener boton del formulario
        const botonActivate = document.querySelector('#button-activate')

        botonActivate.addEventListener('click', ()=>{
            //validar campos

            //hacer solicitud 

            fetch('/tv', {
                method:"POST",
                headers:{'Content-type' : 'application/json'},
                body:JSON.stringify({user: user, pass: pass})
            })
            .then(res=> res.text())
            .then(data=>{
                alert(data);
                leerEquipos()
            })
            
            });

    </script>
</body>
</html>